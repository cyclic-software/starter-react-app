{"ast":null,"code":"import _asyncToGenerator from\"/workspaces/starter-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/workspaces/starter-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/workspaces/starter-react-app/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from'react';import SubmittedForms from'./SubmittedForms';import'./styles.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),dob=_useState6[0],setDob=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),phoneNumber=_useState8[0],setPhoneNumber=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),showForm=_useState12[0],setShowForm=_useState12[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var birthDate,ageDiffMs,ageDate,age,response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(!name||!email||!dob)){_context.next=4;break;}setError('All fields are required.');return _context.abrupt(\"return\");case 4:// DoB validation\nbirthDate=new Date(dob);ageDiffMs=Date.now()-birthDate.getTime();ageDate=new Date(ageDiffMs);age=Math.abs(ageDate.getUTCFullYear()-1970);if(!(age<18)){_context.next=11;break;}setError('Age must be at least 18 years.');return _context.abrupt(\"return\");case 11:if(phoneNumber){_context.next=14;break;}setError('Phone number is required.');return _context.abrupt(\"return\");case 14:_context.next=16;return fetch('/submit-form',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:name,email:email,dob:dob,phoneNumber:phoneNumber})});case 16:response=_context.sent;_context.next=19;return response.json();case 19:data=_context.sent;if(response.ok){// Form submitted successfully\nsetError('');setShowForm(false);}else{setError(data.error);}case 21:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:showForm?/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"User Form\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,placeholder:\"Enter Your Name\",onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,placeholder:\"Enter Your Email\",onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date of Birth:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:dob,onChange:function onChange(e){return setDob(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Phone Number:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:phoneNumber,placeholder:\"Enter Your Phone Number\",onChange:function onChange(e){return setPhoneNumber(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error})]}):/*#__PURE__*/_jsx(SubmittedForms,{})});};export default App;","map":{"version":3,"sources":["/workspaces/starter-react-app/client/src/App.js"],"names":["React","useState","SubmittedForms","App","name","setName","email","setEmail","dob","setDob","phoneNumber","setPhoneNumber","error","setError","showForm","setShowForm","handleSubmit","e","preventDefault","birthDate","Date","ageDiffMs","now","getTime","ageDate","age","Math","abs","getUTCFullYear","fetch","method","headers","body","JSON","stringify","response","json","data","ok","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport SubmittedForms from './SubmittedForms';\nimport './styles.css';\n\nconst App = () => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [dob, setDob] = useState('');\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [error, setError] = useState('');\n  const [showForm, setShowForm] = useState(true);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!name || !email || !dob) \n    {\n      setError('All fields are required.');\n      return;\n    }\n\n    // DoB validation\n    const birthDate = new Date(dob);\n    const ageDiffMs = Date.now() - birthDate.getTime();\n    const ageDate = new Date(ageDiffMs);\n    const age = Math.abs(ageDate.getUTCFullYear() - 1970);\n    if (age < 18) {\n      setError('Age must be at least 18 years.');\n      return;\n    }\n\n\n    if (!phoneNumber) {\n      setError('Phone number is required.');\n      return;\n    }\n\n    const response = await fetch('/submit-form', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ name, email, dob, phoneNumber })\n    });\n\n    const data = await response.json();\n    if (response.ok) \n    {\n      // Form submitted successfully\n      setError('');\n\n      setShowForm(false);\n    } \n    else \n    {\n\n      setError(data.error);\n    }\n  };\n\n  return (\n    <div>\n      {showForm ? (\n        <div className=\"form-container\">\n          <h1>User Form</h1>\n          <form onSubmit={handleSubmit}>\n            <div>\n              <label>Name:</label>\n              <input type=\"text\" value={name} placeholder=\"Enter Your Name\" onChange={(e) => setName(e.target.value)} />\n            </div>\n            <div>\n              <label>Email:</label>\n              <input type=\"email\" value={email} placeholder=\"Enter Your Email\" onChange={(e) => setEmail(e.target.value)} />\n            </div>\n            <div>\n              <label>Date of Birth:</label>\n              <input type=\"date\" value={dob} onChange={(e) => setDob(e.target.value)} />\n            </div>\n            <div>\n              <label>Phone Number:</label>\n              <input type=\"tel\" value={phoneNumber} placeholder=\"Enter Your Phone Number\" onChange={(e) => setPhoneNumber(e.target.value)} />\n            </div>\n            <button type=\"submit\">Submit</button>\n          </form>\n          {error && <p className=\"error-message\">{error}</p>}\n        </div>\n      ) : (\n        <SubmittedForms />\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}